<!-- eslint-disable  -->
<div class="absolute inset-0 flex flex-col min-w-0 overflow-y-auto" cdkScrollable>
  <!-- Header -->
  <div class="relative flex-0 py-8 px-4 sm:p-8 overflow-hidden">
    <!-- Filters -->
    <div class="flex flex-col sm:flex-row items-center justify-between w-full max-w-xs sm:max-w-none">
      <mat-label class="fuse-mat-no-subscript w-full sm:w-24">Filtres </mat-label>
      <mat-form-field class="fuse-mat-no-subscript w-full sm:w-36">
        <mat-select [value]="'all'" (selectionChange)="filterByCategory($event)">
          <mat-option [value]="'all'">All</mat-option>
          <ng-container *ngFor="let organizationType of organizationTypes; trackBy: trackByFn">
            <mat-option [value]="organizationType.slug">{{ organizationType.title }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="fuse-mat-no-subscript w-full sm:w-72 mt-4 sm:mt-0 sm:ml-4" [floatLabel]="'always'">
        <mat-icon matPrefix class="icon-size-5" [svgIcon]="'heroicons_solid:search'"></mat-icon>
        <input (input)="filterByQuery(query.value)" placeholder="Search by title or description" matInput #query />
      </mat-form-field>
      <mat-slide-toggle class="mt-8 sm:mt-0 sm:ml-auto" [color]="'primary'" (change)="toggleCompleted($event)">
        Change view style
      </mat-slide-toggle>
      <button class="fuse-mat-button-rounded sm:ml-16" mat-flat-button [color]="'primary'" [routerLink]="['create']">
        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:office-building'"></mat-icon>
        <span class="ml-2">Ajouter une organisation</span>
      </button>
    </div>
  </div>

  <!-- Main -->
  <div class="flex flex-auto">
    <div class="flex flex-col flex-auto w-full max-w-lg sm:max-w-7xl mx-auto">
      <ng-container *ngIf="this.organizations.length; else noOrganizationsTemplate">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mt-6 sm:mt-8">
          <ng-container *ngFor="let organization of organizations; trackBy: trackByFn">
            <!-- Course -->

            <div class="flex flex-col h-108 shadow rounded-2xl overflow-hidden bg-card">
              <div class="flex flex-col px-6 pt-6">
                <div class="flex items-center justify-between">
                  <!-- Course category -->
                  <ng-container *ngIf="organization.type | fuseFindByKey: 'slug':organizationTypes as organizationType">
                    <div
                      class="py-0.5 px-3 rounded-full text-sm font-semibold"
                      [ngClass]="{
                        'text-blue-800 bg-blue-100 dark:text-blue-50 dark:bg-blue-500':
                          organizationType.slug === 'technologie',
                        'text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500':
                          organizationType.slug === 'construction',
                        'text-pink-800 bg-pink-100 dark:text-pink-50 dark:bg-pink-500':
                          organizationType.slug === 'education',
                        'text-amber-800 bg-amber-100 dark:text-amber-50 dark:bg-amber-500':
                          organizationType.slug === 'research'
                      }"
                    >
                      Type: {{ organization.type }}
                    </div>
                  </ng-container>
                </div>
                <!-- Course title & description -->
                <div class="mt-4 text-lg font-medium">
                  <img class="w-16 h-16 rounded-full" src="{{ organization.logo }}" alt="Logo" />
                  {{ organization.title }}
                </div>
                <div class="mt-0.5 line-clamp-3 text-secondary">{{ organization.description }}</div>
                <div class="w-12 h-1 my-6 border-t-2"></div>
                <!-- Course time -->
                <div class="flex items-center leading-5 text-md text-secondary">
                  <mat-icon class="icon-size-5 text-hint" [svgIcon]="'heroicons_solid:users'"></mat-icon>
                  <div class="ml-1.5">{{ organization.members }} membres</div>
                </div>
                <div class="flex items-center leading-5 text-md text-secondary">
                  <mat-icon class="icon-size-5 text-hint" [svgIcon]="'heroicons_solid:users'"></mat-icon>
                  <div class="ml-1.5">{{ organization.resources }} resources</div>
                </div>
                <div class="flex items-center leading-5 text-md text-secondary">
                  <mat-icon class="icon-size-5 text-hint" [svgIcon]="'heroicons_solid:users'"></mat-icon>
                  <div class="ml-1.5">{{ organization.projects }} projects</div>
                </div>
              </div>
              <!-- Footer -->
              <div class="flex flex-col w-full mt-auto">
                <!-- Course launch button -->
                <div class="px-6 py-4 text-right bg-gray-50 dark:bg-transparent">
                  <button mat-stroked-button [routerLink]="[organization.id]">
                    <span class="inline-flex items-center">
                      <ng-container>
                        <span>Details</span>
                      </ng-container>
                      <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="'heroicons_solid:arrow-sm-right'"></mat-icon>
                    </span>
                  </button>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-container>

      <!-- No courses -->
      <ng-template #noOrganizationsTemplate>
        <div class="flex flex-auto flex-col items-center justify-center bg-gray-100 dark:bg-transparent">
          <mat-icon class="icon-size-20" [svgIcon]="'iconsmind:file_search'"></mat-icon>
          <div class="mt-6 text-2xl font-semibold tracking-tight text-secondary">No organization found!</div>
          <div class="mt-6 text-2xl font-semibold tracking-tight">
            <button class="fuse-mat-button-rounded m-16" mat-flat-button [color]="'primary'">
              <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:office-building'"></mat-icon>
              <span class="ml-2">Ajouter une organisation</span>
            </button>
            <button class="fuse-mat-button-rounded m-16" mat-flat-button [color]="'primary'">
              <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:office-building'"></mat-icon>
              <span class="ml-2">Rejoindre une organisation</span>
            </button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
