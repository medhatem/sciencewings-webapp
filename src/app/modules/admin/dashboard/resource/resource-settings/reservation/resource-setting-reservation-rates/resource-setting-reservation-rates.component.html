<div class="w-full max-w-3xl">
    <div class="flex items-center justify-end mb-5">
        <button class="ml-4" mat-flat-button type="button" [color]="'primary'" (click)="test()">TEST</button>
        <button class="ml-4" mat-flat-button type="button" [color]="'primary'" (click)="toggleRateCard()">Add</button>
    </div>
    <fuse-card class="flex flex-col p-8 pt-6 filter-list mb-5" [ngClass]="{'hidden': isCardHidden}">
        <div class="flex items-center justify-between">
            <div class="text-2xl font-semibold leading-tight">Rate</div>
            <div class="-mr-3">
                <button mat-icon-button [matMenuTriggerFor]="listCard07Menu">
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:pencil-alt'"></mat-icon>
                </button>
                <mat-menu #listCard07Menu="matMenu">
                    <button mat-menu-item>View weekly</button>
                    <button mat-menu-item>View monthly</button>
                </mat-menu>
            </div>
        </div>
        <div class="flex flex-col my-2">
            <form [formGroup]="form">
                <div class="my-2">
                    <div>Description</div>
                    <div class="sm:col-span-4">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <input [formControlName]="'description'" matInput>
                        </mat-form-field>
                    </div>
                </div>
                <div class="my-2">
                    <div>Rate</div>
                    <div class="sm:col-span-4">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <input [formControlName]="'rate'" matInput>
                        </mat-form-field>
                    </div>
                </div>
                <div class="my-2">
                    <div class="sm:col-span-4">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Category</mat-label>
                            <mat-select [formControlName]="'category'">
                                <mat-option [value]="'english'">X</mat-option>
                                <mat-option [value]="'french'">Y</mat-option>
                                <mat-option [value]="'spanish'">Z</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="my-2">
                    <div class="flex sm:col-span-4 justify-between my-1">
                        <mat-label>Applies to public</mat-label>
                        <mat-slide-toggle [formControlName]="'isPublic'" [color]="'primary'">
                        </mat-slide-toggle>
                    </div>
                </div>
                <div class="my-2">
                    <div class="flex sm:col-span-4 justify-between my-1">
                        <mat-label>Account</mat-label>
                        <mat-slide-toggle [formControlName]="'isRequiredAccountNumber'" [color]="'primary'">
                        </mat-slide-toggle>
                    </div>
                </div>
                <div class="my-2">
                    <div>Durations</div>
                    <div class="sm:col-span-4">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <input [formControlName]="'duration'" matInput>
                        </mat-form-field>
                    </div>
                </div>

                <!-- Divider -->
                <div class="mt-11 mb-10 border-t"></div>

                <!-- Actions -->
                <div class="flex items-center justify-end">
                    <button mat-stroked-button type="button" (click)="onCancel()">
                        Cancel
                    </button>
                    <button class="ml-4" mat-flat-button type="button" [color]="'primary'" (click)="onSubmit()">
                        {{selectedRateId ? "Update" : "Add"}}
                    </button>
                </div>
            </form>
        </div>
    </fuse-card>

    <ng-container *ngFor="let rate of rates">
        <fuse-card class="flex flex-col p-8 pt-6 filter-list mt-2">
            <table>
                <thead>
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Description</td>
                        <td>{{rate.description}}</td>
                    </tr>
                    <tr>
                        <td>Rate</td>
                        <td>{{rate.rate}}</td>
                    </tr>
                    <tr>
                        <td>Category</td>
                        <td>{{rate.category}}</td>
                    </tr>
                    <tr>
                        <td>Applies to</td>
                        <td>{{rate.isPublic}}</td>
                    </tr>
                    <tr>
                        <td>Account</td>
                        <td>{{rate.isRequiredAccountNumber}}</td>
                    </tr>
                    <tr>
                        <td>duration</td>
                        <td>{{rate.duration}}</td>
                    </tr>
                </tbody>
            </table>
                    <!-- Divider -->
        <div class="mt-11 mb-10 border-t"></div>

        <!-- Actions -->
        <div class="flex items-center justify-between">
            <button mat-stroked-button type="button" [color]="'warn'">
                Remove
            </button>
            <button class="ml-4" mat-flat-button type="button" [color]="'primary'" (click)="onRateSelect(rate)">
                Update
            </button>
        </div>
        </fuse-card>
    </ng-container>
</div>
