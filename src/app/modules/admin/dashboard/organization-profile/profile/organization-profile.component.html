<!-- eslint-disable max-len -->
<div class="flex flex-col flex-auto min-w-0">
  <!-- Header -->
  <div class="relative flex-0 px-4 pt-2 overflow-hidden">
    <!-- Actions -->
    <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-2">
      <!-- Back -->
      <div class="flex flex-col sm:flex-row items-center justify-between w-full max-w-xs sm:max-w-none">
        <button class="fuse-mat-button-rounded sm:ml-16" mat-flat-button [color]="'primary'" routerLink="{{ ['../'] }}">
          <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:arrow-circle-left'"></mat-icon>
          <span class="ml-2">Back</span>
        </button>
      </div>
      <!-- create new -->
      <div class="flex items-center mt-6 sm:mt-0 sm:ml-2 space-x-3">
        <button class="fuse-mat-button-rounded" mat-flat-button [color]="'primary'" [routerLink]="['/admin/organization-profile/create']">
          <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:office-building'"></mat-icon>
          <span class="ml-2">Ajouter une organisation</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Main grid gap-4 grid-cols-3 -->
  <div class="flex flex-auto py-1">
    <div class="flex flex-col flex-auto w-full max-w-lg sm:max-w-full mx-auto">
      <div class="grid grid-cols-3 gap-3 w-full max-w-screen-xl mx-auto ml-3 mr-3">
        <!-- About me -->
        <fuse-card class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl">
          <div class="flex flex-col items-center w-full p-4">
            <div class="text-2xl font-semibold p-1 leading-tight">Science Wings</div>
            <div class="text-2xl font-semibold p-1 leading-tight">administration@sciencewings.com</div>
          </div>
          <hr class="w-full border-t my-6" />
          <div class="text-2xl font-semibold leading-tight">About the organization</div>
          <div class="mt-4">
            Software consulting and development for your digital success.
            <br /><br />
            Want to take your software and enterprise to another level? you’ve come to the proper location. We will help you create a remarkable
            presence online while guiding you through the whole process.
          </div>
          <hr class="w-full border-t my-6" />
          <div class="flex flex-col">
            <div class="flex items-center">
              <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:location-marker'"></mat-icon>
              <span class="leading-none">Ontario, CA</span>
            </div>
            <div class="flex items-center mt-4">
              <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:briefcase'"></mat-icon>
              <span class="leading-none">Software consulting and development</span>
            </div>
            <div class="flex items-center mt-4">
              <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:user-group'"></mat-icon>
              <span class="leading-none">14 members</span>
            </div>
            <div class="flex items-center mt-4">
              <mat-icon class="icon-size-5 mr-3" [svgIcon]="'heroicons_solid:server'"></mat-icon>
              <span class="leading-none">184 resources</span>
            </div>
          </div>
        </fuse-card>
        <div class="col-span-2 flex flex-col flex-auto py-6 bg-card shadow rounded-2xl overflow-hidden">
          <!-- Tabs -->
          <mat-tab-group class="sm:px-2" animationDuration="500ms">
            <mat-tab label="{{ 'ORGANIZATION.PROFILE_RESOURCE.TABS.GENERAL_INFOS' | transloco }}">
              <ng-container *ngTemplateOutlet="organizationInfosTemplate"></ng-container>
            </mat-tab>
            <mat-tab label="{{ 'ORGANIZATION.PROFILE_RESOURCE.TABS.RESOURCES' | transloco }}">
              <ng-container *ngTemplateOutlet="organizationResourcesTemplate"></ng-container>
            </mat-tab>
            <mat-tab label="{{ 'ORGANIZATION.PROFILE_RESOURCE.TABS.USERS' | transloco }}">
              <ng-container *ngTemplateOutlet="organizationUsersTemplate"></ng-container>
            </mat-tab>
            <mat-tab label="{{ 'ORGANIZATION.PROFILE_RESOURCE.TABS.SUB_ORGANIZATIONS' | transloco }}">
              <ng-container *ngTemplateOutlet="organizationSubOrganizationsListTemplate"></ng-container>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #organizationInfosTemplate>
  <div class="p-8">
    <div class="flex flex-col mt-4 pt-6 border-t space-y-8">
      <!-- Title -->
      <ng-container *ngIf="organization.name">
        <div class="flex sm:items-center">
          <mat-icon [svgIcon]="'heroicons_outline:office-building'"></mat-icon>
          <div class="ml-6 leading-6">{{ organization.name }}</div>
        </div>
      </ng-container>

      <ng-container *ngIf="organization.email">
        <div class="flex sm:items-center">
          <mat-icon [svgIcon]="'heroicons_outline:at-symbol'"></mat-icon>
          <div class="ml-6 leading-6">{{ organization.email }}</div>
        </div>
      </ng-container>

      <!-- Address -->
      <ng-container *ngIf="organization.address">
        <div class="flex sm:items-center">
          <mat-icon [svgIcon]="'heroicons_outline:location-marker'"></mat-icon>
          <div class="ml-6 leading-6">{{ getFormattedAddress(organization.address) }}</div>
        </div>
        <div *ngIf="organization.address.sector" class="flex sm:items-center">
          <mat-icon [svgIcon]="'heroicons_outline:briefcase'"></mat-icon>
          <div class="ml-6 leading-6">Secteur: {{ organization.address.sector }}</div>
        </div>
        <div *ngIf="organization.address.department" class="flex sm:items-center">
          <mat-icon [svgIcon]="'heroicons_outline:academic-cap'"></mat-icon>
          <div class="ml-6 leading-6">Département: {{ organization.address.department }}</div>
        </div>
      </ng-container>

      <!-- Phone -->
      <ng-container *ngIf="organization.phones.length">
        <div class="flex">
          <mat-icon [svgIcon]="'heroicons_outline:phone'"></mat-icon>
          <div class="min-w-0 ml-6 space-y-1">
            <ng-container *ngFor="let phoneNumber of organization.phoneNumbers; trackBy: trackByFn">
              <div class="flex items-center leading-6">
                <div
                  class="hidden sm:flex w-6 h-4 overflow-hidden"
                  [style.background]="'url(\'/assets/images/apps/contacts/flags.png\') no-repeat 0 0'"
                  [style.backgroundSize]="'24px 3876px'"></div>
                <div class="ml-2.5 font-mono">{{ phoneNumber.phoneNumber }}</div>
                <div class="text-md truncate text-secondary" *ngIf="phoneNumber.label">
                  <span class="mx-2">&bull;</span>
                  <span class="font-medium">{{ phoneNumber.label }}</span>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </ng-container>

      <!-- about -->
      <ng-container *ngIf="organization.description">
        <div class="flex">
          <mat-icon [svgIcon]="'heroicons_outline:menu-alt-2'"></mat-icon>
          <div class="max-w-none ml-6 prose prose-sm" [innerHTML]="organization.description"></div>
        </div>
      </ng-container>
    </div>
  </div>
</ng-template>

<ng-template #organizationUsersTemplate>
  <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent">
    <mat-drawer-content class="flex flex-col">
      <!-- Main -->
      <div class="flex-auto">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between py-8 px-2 md:px-4 border-b">
          <div class="flex items-center mt-4 sm:mt-0 md:mt-4">
            <div class="flex-auto">
              <mat-form-field class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full min-w-50">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                <!-- to do : add to below input search
                  [formControl]="searchInputControl"
                  [autocomplete]="'off'" -->
                <input matInput [placeholder]="'Search users'" />
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="flex flex-auto overflow-hidden">
          <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
            <div class="grid">
              <!-- Header -->
              <!-- To do
                  add to div headers: [mat-sort-header]
                   matSort
                  matSortDisableClear
                -->
              <div
                class="grid-cols-5 z-10 sticky top-0 grid gap-4 py-4 px-2 md:px-4 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5">
                <div class="hidden md:block ml-4">Nom</div>
                <div class="hidden md:block ml-4">Prénom</div>
                <div class="ml-8">Titre</div>
                <div class="ml-8">Location</div>
                <div class="hidden sm:block ml-12">Details</div>
              </div>
            </div>
            <!-- Rows -->
            <div
              *ngFor="let contact of organizationUsersList; let i = index"
              class="grid-cols-5 sticky top-0 grid gap-4 shadow text-md font-semibold">
              <!-- Contact -->
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="flex flex-0 items-center justify-center w-10 h-10 rounded-full overflow-hidden">
                  <ng-container *ngIf="contact.avatar">
                    <img class="object-cover w-full h-full" [src]="contact.avatar" alt="Contact avatar" />
                  </ng-container>
                  <ng-container *ngIf="!contact.avatar">
                    <div
                      class="`flex items-center justify-center p-12 rounded-full text-lg uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200`">
                      {{ contact.firstname.charAt(0) }}{{ contact.lastname.charAt(0) }}
                    </div>
                  </ng-container>
                </div>
                <div class="min-w-0 ml-4">
                  <div class="font-medium leading-5 truncate">{{ contact.firstname }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.lastname }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.title }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.location }}</div>
                </div>
              </div>
              <div class="flex items-center cursor-pointer border-b">
                <div class="px-2 py-4 text-right md:px-1 dark:bg-transparent">
                  <button mat-stroked-button>
                    <span class="inline-flex items-center">
                      <ng-container>
                        <span>Details</span>
                      </ng-container>
                      <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="'heroicons_solid:arrow-sm-right'"></mat-icon>
                    </span>
                  </button>
                </div>
              </div>
            </div>

            <mat-paginator
              class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
              [length]="10"
              [pageIndex]="pagination.page"
              [pageSize]="5"
              [showFirstLastButtons]="true"></mat-paginator>
          </div>
        </div>
        <ng-template #noContacts>
          <div class="p-8 sm:p-16 border-t text-2xl text-secondary tracking-tight text-center">There are no users!</div>
        </ng-template>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</ng-template>

<ng-template #organizationResourcesTemplate>
  <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent">
    <mat-drawer-content class="flex flex-col">
      <!-- Main -->
      <div class="flex-auto">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between py-8 px-2 md:px-4 border-b">
          <div class="flex items-center mt-4 sm:mt-0 md:mt-4">
            <div class="flex-auto">
              <mat-form-field class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full min-w-50">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                <!-- to do : add to below input search
                  [formControl]="searchInputControl"
                  [autocomplete]="'off'" -->
                <input matInput [placeholder]="'Search users'" />
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="flex flex-auto overflow-hidden">
          <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
            <div class="grid">
              <!-- Header -->
              <!-- To do
                  add to div headers: [mat-sort-header]
                   matSort
                  matSortDisableClear
                -->
              <div
                class="grid-cols-5 z-10 sticky top-0 grid gap-4 py-4 px-2 md:px-4 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5">
                <div class="hidden md:block ml-4">Nom</div>
                <div class="hidden md:block ml-4">Type</div>
                <div class="ml-8">Confidentialité</div>
                <div class="ml-8">Quantité</div>
                <div class="hidden sm:block ml-12">Details</div>
              </div>
            </div>
            <!-- Rows -->
            <div
              *ngFor="let contact of organizationResourcesList; let i = index"
              class="grid-cols-5 sticky top-0 grid gap-4 shadow text-md font-semibold">
              <!-- Contact -->
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="font-medium leading-5 truncate">{{ contact.name }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.type }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.privacy }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.qty }}</div>
                </div>
              </div>
              <div class="flex items-center cursor-pointer border-b">
                <div class="px-2 py-4 text-right md:px-1 dark:bg-transparent">
                  <button mat-stroked-button>
                    <span class="inline-flex items-center">
                      <ng-container>
                        <span>Details</span>
                      </ng-container>
                      <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="'heroicons_solid:arrow-sm-right'"></mat-icon>
                    </span>
                  </button>
                </div>
              </div>
            </div>

            <mat-paginator
              class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
              [length]="10"
              [pageIndex]="pagination.page"
              [pageSize]="5"
              [showFirstLastButtons]="true"></mat-paginator>
          </div>
        </div>
        <ng-template #noContacts>
          <div class="p-8 sm:p-16 border-t text-2xl text-secondary tracking-tight text-center">There are no resources!</div>
        </ng-template>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</ng-template>

<ng-template #organizationSubOrganizationsListTemplate>
  <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent">
    <mat-drawer-content class="flex flex-col">
      <!-- Main -->
      <div class="flex-auto">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between py-8 px-2 md:px-4 border-b">
          <div class="flex items-center mt-4 sm:mt-0 md:mt-4">
            <div class="flex-auto">
              <mat-form-field class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded w-full min-w-50">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                <!-- to do : add to below input search
                  [formControl]="searchInputControl"
                  [autocomplete]="'off'" -->
                <input matInput [placeholder]="'Search users'" />
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="flex flex-auto overflow-hidden">
          <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
            <div class="grid">
              <!-- Header -->
              <!-- To do
                  add to div headers: [mat-sort-header]
                   matSort
                  matSortDisableClear
                -->
              <div
                class="grid-cols-5 z-10 sticky top-0 grid gap-4 py-4 px-2 md:px-4 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5">
                <div class="hidden md:block ml-4">Nom</div>
                <div class="hidden md:block ml-4">email</div>
                <div class="ml-8">Departement</div>
                <div class="ml-8">Secteur</div>
                <div class="hidden sm:block ml-12">Details</div>
              </div>
            </div>
            <!-- Rows -->
            <div
              *ngFor="let contact of organizationSubOrganizationsList; let i = index"
              class="grid-cols-5 sticky top-0 grid gap-4 shadow text-md font-semibold">
              <!-- Contact -->
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="font-medium leading-5 truncate">{{ contact.name }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.email }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.department }}</div>
                </div>
              </div>
              <div class="z-20 flex items-center py-4 md:px-4 cursor-pointer border-b">
                <div class="min-w-0 ml-4">
                  <div class="leading-5 truncate text-secondary">{{ contact.sector }}</div>
                </div>
              </div>
              <div class="flex items-center cursor-pointer border-b">
                <div class="px-2 py-4 text-right md:px-1 dark:bg-transparent">
                  <button mat-stroked-button>
                    <span class="inline-flex items-center">
                      <ng-container>
                        <span>Details</span>
                      </ng-container>
                      <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="'heroicons_solid:arrow-sm-right'"></mat-icon>
                    </span>
                  </button>
                </div>
              </div>
            </div>

            <mat-paginator
              class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
              [length]="10"
              [pageIndex]="pagination.page"
              [pageSize]="5"
              [showFirstLastButtons]="true"></mat-paginator>
          </div>
        </div>
        <ng-template #noContacts>
          <div class="p-8 sm:p-16 border-t text-2xl text-secondary tracking-tight text-center">There are no sub-organizations!</div>
        </ng-template>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</ng-template>
